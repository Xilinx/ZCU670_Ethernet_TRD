<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Setting up the Board and Application Deployment &mdash; ZCU670 Ethernet TRD 2022.2 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Build Flow" href="build_vivado_design.html" />
    <link rel="prev" title="TRD Package Contents" href="trd_packaging.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> ZCU670 Ethernet TRD
            <img src="../../../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../platform_landing.html">ZCU670 Ethernet TRD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#features">Features</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../platform_landing.html#quick-start">Quick Start</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction.html">Design Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="trd_packaging.html">TRD Package Contents</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting up the Board and Application Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ptp-commands">PTP commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iperf-commands">Iperf Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#architecture-documents">Architecture Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#others">Others</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#xilinx-support">Xilinx Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#license">License</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/ZCU670_Ethernet_TRD/2022.2/docs/build/html/index.html">Master (2022.2)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ZCU670 Ethernet TRD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../platform_landing.html">ZCU670 Ethernet TRD</a> &raquo;</li>
      <li>Setting up the Board and Application Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/platform/docs/app_deployment.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="../../media/xilinx-logo.png" width="30%"/><h1> RFSoC-ZCU670 Evaluation Kit Tutorial </h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1> Board Setup and Application Deployment</h1> </td>
 </tr>
</table><div class="section" id="setting-up-the-board-and-application-deployment">
<h1>Setting up the Board and Application Deployment<a class="headerlink" href="#setting-up-the-board-and-application-deployment" title="Permalink to this heading">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This document shows how to set up the board and run the ZCU670 Ethernet TRD application with prebuilt images.</p>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Reference design package <code class="docutils literal notranslate"><span class="pre">zcu670_ethernet_trd_2022.2.zip</span></code> file</p></li>
<li><p>ZCU670 Evaluation Board with power cable - 2 No.</p></li>
<li><p>Micro-USB cable for the terminal emulation.</p></li>
<li><p>Micro SD card</p></li>
<li><p>UART Driver (FTDI CDM ).</p></li>
<li><p>Terminal emulator, for example:</p>
<p>Windows: teraterm (Refer to <a href="https://docs.xilinx.com/v/u/en-US/ug1036-tera-term-install">UG1036 </a> regarding Tera Term installation)</p>
<p>Linux: picocom (https://github.com/npat-efault/picocom/releases)</p>
</li>
<li><p>25G SFP28 copper cable.</p></li>
<li><p>Iperf3 (v 3.9) application.</p></li>
<li><p>ptp4l (v 3.1.1)</p></li>
</ul>
</div>
<div class="section" id="board-setup">
<h3>Board Setup<a class="headerlink" href="#board-setup" title="Permalink to this heading">¶</a></h3>
<p>The following figure shows the ZCU670 evaluation board set up.</p>
<p><img alt="setup" src="../../../_images/zcu670_setup_new.png" /></p>
<p><strong>Board jumper and switch settings</strong></p>
<p>This is a one-time setup and the board should have been delivered to you with this default setting, however it is good to double check for the first time when you get the board.</p>
<ul class="simple">
<li><p>Setup Boot Mode switch SW2 to (ON,OFF,OFF,OFF) from switch bits 1 to 4 as shown in the above image.</p></li>
<li><p>Connect SFP28 cable between the SFP28 port of Board-1 and SFP28 port of Board-2.</p></li>
</ul>
</div>
<div class="section" id="flash-the-sd-card">
<h3>Flash the SD Card<a class="headerlink" href="#flash-the-sd-card" title="Permalink to this heading">¶</a></h3>
<ol>
<li><p>Unzip the package and save it on your computer.</p></li>
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">../zcu670-ethernet-trd-2022.2/prebuilt</span></code> folder.</p></li>
<li><p>Prepare the SD card. There are many options to format the SD Card in the windows tool. But, always format with FAT32 option. Use the SD Card Formatter tool to format the SD card <a href="https://www.sdcard.org/downloads/formatter_4/">SD Card Formatter </a></p>
<p><img alt="formatter" src="../../../_images/sd-card-format.png" />.</p>
</li>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">BOOT.BIN,</span> <span class="pre">image.ub</span> <span class="pre">and</span> <span class="pre">boot.scr</span></code> to microSD card.</p></li>
<li><p>Connect the microSD card to the Board.</p></li>
<li><p>Repeat steps 3 , 4 and 5 for the second Board.</p></li>
</ol>
</div>
<div class="section" id="gt-reference-clocks">
<h3>GT Reference clocks<a class="headerlink" href="#gt-reference-clocks" title="Permalink to this heading">¶</a></h3>
<p>The GT Reference clocks required for the design are configured by the Renesas IDT drivers while booting. The 8A34001 chip is the clock source for IEEE 1588 and Synchronous Ethernet (SyncE) based clocks.</p>
</div>
<div class="section" id="uart-driver-install">
<h3>UART Driver Install<a class="headerlink" href="#uart-driver-install" title="Permalink to this heading">¶</a></h3>
<p>Prior to connecting and powering on the ZCU670, install the FTDI CDM Drivers <a href="http://www.ftdichip.com/Drivers/CDM/CDM21228_Setup.zip">FTDI CDM Driver </a></p>
<p><img alt="UART" src="../../../_images/FTDI_driver.png" /></p>
</div>
<div class="section" id="sd-boot-mode">
<h3>SD Boot Mode:<a class="headerlink" href="#sd-boot-mode" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Connect the power supply to the ZCU670 (J52) port and Power on the board</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>Note: Ensure the Boot Mode switch SW2 to (ON,OFF,OFF,OFF).</p></li>
</ul>
</div></blockquote>
<p><strong>Serial console settings</strong></p>
<p>ZCU670 comes with a micro USB connector for JTAG+UART. Connect a Type-A to micro USB cable between the USB UART JTAG (FTDI) connector (J83) of the ZCU670 board and the PC.</p>
<p>The PC will enumerate and shows three COM ports.</p>
<ul class="simple">
<li><p>UART0 (PS)</p></li>
<li><p>UART1 (PL)</p></li>
<li><p>System Controller UART</p></li>
</ul>
<p>In a terminal emulator, connect to UART0 using the following settings:</p>
<ul class="simple">
<li><p>Baud Rate: 115200</p></li>
<li><p>Data: 8 bit</p></li>
<li><p>Parity: None</p></li>
<li><p>Stop: 1 bit</p></li>
<li><p>Flow Control: None</p></li>
</ul>
<p><img alt="TT" src="../../../_images/tera_term_serial.PNG" /></p>
<ul>
<li><p>After a successful boot, a shell prompt will appear as shown below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">zcu670</span><span class="o">-</span><span class="n">xilinx</span><span class="o">-</span><span class="mf">2022.2</span> <span class="n">login</span><span class="p">:</span> 
</pre></div>
</div>
</li>
<li><p>Login with the username ‘petalinux’ and create a New password when prompted.</p></li>
<li><p>To configure the Ethernet interfaces, make sure to log in as super user using the New password created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>zcu670-xilinx-2022.2:~$:sudo su
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="running-the-applications-on-board">
<h3>Running the applications on board<a class="headerlink" href="#running-the-applications-on-board" title="Permalink to this heading">¶</a></h3>
<p>Once the zcu670 boards are booted, set up an IP address for the interface (in this case eth1) and make sure the Ethernet link is established between boards. Do not proceed until you are able to ping between boards.</p>
<blockquote>
<div><ul class="simple">
<li><p>Note: If the link is not established, use the below commands once and ensure the link is up.</p></li>
</ul>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">ifconfig</span> <span class="o">&lt;</span><span class="n">interface_name</span><span class="o">&gt;</span> <span class="n">down</span>	
 <span class="n">ifconfig</span> <span class="o">&lt;</span><span class="n">interface_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">IP</span><span class="o">-</span><span class="n">address</span><span class="o">&gt;</span> <span class="n">up</span>
</pre></div>
</div>
<p>By default the interface links up at <strong>25G</strong>.</p>
<blockquote>
<div><ul class="simple">
<li><p>Note: While making the interface up, make sure a valid IP address is set for the interface.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="ptp-commands">
<h2>PTP commands<a class="headerlink" href="#ptp-commands" title="Permalink to this heading">¶</a></h2>
<div class="section" id="phase-synchronization">
<h3>Phase Synchronization<a class="headerlink" href="#phase-synchronization" title="Permalink to this heading">¶</a></h3>
<p><strong>Master:</strong></p>
<ul class="simple">
<li><p>Run ptp4l in master mode:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Board</span><span class="o">-</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">ptp4l</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">interface</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">f</span>  <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">linkpartner_G</span><span class="mf">.8275.1</span><span class="o">.</span><span class="n">cfg</span> <span class="o">-</span><span class="n">m</span>
</pre></div>
</div>
<p><strong>ptp4l master side log</strong> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">ptp4l</span><span class="p">[</span><span class="mf">422.355</span><span class="p">]:</span> <span class="n">selected</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp1</span> <span class="k">as</span> <span class="n">PTP</span> <span class="n">clock</span>
 <span class="n">xilinx</span><span class="o">-</span><span class="n">zcu670</span><span class="o">-</span><span class="mi">20222</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">petalinux</span><span class="c1"># ptp4l[422.392]: port 1: INITIALIZING to LISTENING on INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">422.392</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">0</span><span class="p">:</span> <span class="n">INITIALIZING</span> <span class="n">to</span> <span class="n">LISTENING</span> <span class="n">on</span> <span class="n">INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">422.817</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">LISTENING</span> <span class="n">to</span> <span class="n">MASTER</span> <span class="n">on</span> <span class="n">ANNOUNCE_RECEIPT_TIMEOUT_EXPIRES</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">422.817</span><span class="p">]:</span> <span class="n">selected</span> <span class="n">local</span> <span class="n">clock</span> <span class="mi">9</span><span class="n">a11bc</span><span class="o">.</span><span class="n">fffe</span><span class="mf">.62</span><span class="n">d209</span> <span class="k">as</span> <span class="n">best</span> <span class="n">master</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">422.817</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">assuming</span> <span class="n">the</span> <span class="n">grand</span> <span class="n">master</span> <span class="n">role</span>
</pre></div>
</div>
<p><strong>Slave:</strong></p>
<ul class="simple">
<li><p>Run ts2phc between Renesas ClockMatrix PHC and Xilinx Timer-Syncer PHC in background:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Board</span><span class="o">-</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="n">ts2phc</span> <span class="o">-</span><span class="n">m</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">interface</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp0</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">ts2phc</span><span class="o">.</span><span class="n">cfg</span> <span class="o">&amp;</span>
</pre></div>
</div>
<p><strong>ts2phc log</strong> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">PTP_PIN_SETFUNC2</span> <span class="n">failed</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">argument</span>
 <span class="n">ts2phc</span><span class="p">[</span><span class="mf">521.912</span><span class="p">]:</span> <span class="n">Failed</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">pin</span><span class="o">.</span> <span class="n">Continuing</span> <span class="n">bravely</span> <span class="n">on</span><span class="o">...</span>
</pre></div>
</div>
<blockquote>
<div><ul class="simple">
<li><p><strong>Note: This message can be ignored because the Renesas ClockMatrix PHC driver does not support dynamic PTP_PIN_SETFUNC. For more details refer <a class="reference external" href="https://www.renesas.com/us/en/document/mas/linux-ptp-using-phc-adjust-phase-quick-start-manual">Renesas Phase Adjust quick start manual</a> or Use -l option.</strong></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Run ptp4l in slave mode:</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>Note: Ensure that only one instance of ptp4l master is running in Link partner.</p></li>
</ul>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Board</span><span class="o">-</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="n">ptp4l</span> <span class="o">-</span><span class="n">m</span> <span class="o">-</span><span class="n">q</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp0</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">standalone_G</span><span class="mf">.8275.1</span><span class="o">.</span><span class="n">cfg</span>
</pre></div>
</div>
<p><strong>ptp4l phase synchronization log</strong> :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">ptp4l</span><span class="p">[</span><span class="mf">530.543</span><span class="p">]:</span> <span class="n">selected</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp0</span> <span class="k">as</span> <span class="n">PTP</span> <span class="n">clock</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">530.546</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">taking</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp0</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">command</span> <span class="n">line</span><span class="p">,</span> <span class="ow">not</span> <span class="n">the</span> <span class="n">attached</span> <span class="n">ptp1</span>
 <span class="n">xilinx</span><span class="o">-</span><span class="n">zcu670</span><span class="o">-</span><span class="mi">20222</span><span class="p">:</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">petalinux</span><span class="c1"># ptp4l[530.588]: port 1: INITIALIZING to LISTENING on INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">530.588</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">0</span><span class="p">:</span> <span class="n">INITIALIZING</span> <span class="n">to</span> <span class="n">LISTENING</span> <span class="n">on</span> <span class="n">INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">530.673</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">new</span> <span class="n">foreign</span> <span class="n">master</span> <span class="mi">9</span><span class="n">a11bc</span><span class="o">.</span><span class="n">fffe</span><span class="mf">.62</span><span class="n">d209</span><span class="o">-</span><span class="mi">1</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">530.923</span><span class="p">]:</span> <span class="n">selected</span> <span class="n">best</span> <span class="n">master</span> <span class="n">clock</span> <span class="mi">9</span><span class="n">a11bc</span><span class="o">.</span><span class="n">fffe</span><span class="mf">.62</span><span class="n">d209</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">530.923</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">LISTENING</span> <span class="n">to</span> <span class="n">UNCALIBRATED</span> <span class="n">on</span> <span class="n">RS_SLAVE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">531.303</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">UNCALIBRATED</span> <span class="n">to</span> <span class="n">SLAVE</span> <span class="n">on</span> <span class="n">MASTER_CLOCK_SELECTED</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">531.990</span><span class="p">]:</span> <span class="n">rms</span> <span class="mi">937470829990502912</span> <span class="nb">max</span> <span class="mi">1676998802225530368</span> <span class="n">freq</span>  <span class="o">-</span><span class="mi">1588</span> <span class="o">+/-</span> <span class="mi">63277</span> <span class="n">delay</span> <span class="o">-</span><span class="mi">59892814365198016</span> <span class="o">+/-</span> <span class="mi">215946613225567776</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">532.991</span><span class="p">]:</span> <span class="n">rms</span> <span class="mi">2629</span> <span class="nb">max</span> <span class="mi">3787</span> <span class="n">freq</span>  <span class="o">+</span><span class="mi">5008</span> <span class="o">+/-</span> <span class="mi">3793</span> <span class="n">delay</span>   <span class="mi">167</span> <span class="o">+/-</span>  <span class="mi">94</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">533.991</span><span class="p">]:</span> <span class="n">rms</span> <span class="mi">3208</span> <span class="nb">max</span> <span class="mi">3803</span> <span class="n">freq</span>  <span class="o">-</span><span class="mi">2030</span> <span class="o">+/-</span> <span class="mi">660</span> <span class="n">delay</span>    <span class="mi">52</span> <span class="o">+/-</span>  <span class="mi">19</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">534.991</span><span class="p">]:</span> <span class="n">rms</span> <span class="mi">1209</span> <span class="nb">max</span> <span class="mi">2025</span> <span class="n">freq</span>  <span class="o">-</span><span class="mi">1957</span> <span class="o">+/-</span> <span class="mi">389</span> <span class="n">delay</span>    <span class="mi">52</span> <span class="o">+/-</span>  <span class="mi">17</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">535.991</span><span class="p">]:</span> <span class="n">rms</span>  <span class="mi">169</span> <span class="nb">max</span>  <span class="mi">270</span> <span class="n">freq</span>   <span class="o">-</span><span class="mi">687</span> <span class="o">+/-</span> <span class="mi">290</span> <span class="n">delay</span>    <span class="mi">66</span> <span class="o">+/-</span>   <span class="mi">6</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">536.992</span><span class="p">]:</span> <span class="n">rms</span>  <span class="mi">226</span> <span class="nb">max</span>  <span class="mi">255</span> <span class="n">freq</span>   <span class="o">-</span><span class="mi">112</span> <span class="o">+/-</span>  <span class="mi">63</span> <span class="n">delay</span>    <span class="mi">74</span> <span class="o">+/-</span>   <span class="mi">2</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">537.992</span><span class="p">]:</span> <span class="n">rms</span>   <span class="mi">99</span> <span class="nb">max</span>  <span class="mi">159</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">78</span> <span class="o">+/-</span>  <span class="mi">23</span> <span class="n">delay</span>    <span class="mi">75</span> <span class="o">+/-</span>   <span class="mi">2</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">538.992</span><span class="p">]:</span> <span class="n">rms</span>   <span class="mi">13</span> <span class="nb">max</span>   <span class="mi">30</span> <span class="n">freq</span>   <span class="o">-</span><span class="mi">166</span> <span class="o">+/-</span>  <span class="mi">22</span> <span class="n">delay</span>    <span class="mi">74</span> <span class="o">+/-</span>   <span class="mi">1</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">539.993</span><span class="p">]:</span> <span class="n">rms</span>   <span class="mi">16</span> <span class="nb">max</span>   <span class="mi">18</span> <span class="n">freq</span>   <span class="o">-</span><span class="mi">211</span> <span class="o">+/-</span>   <span class="mi">6</span> <span class="n">delay</span>    <span class="mi">73</span> <span class="o">+/-</span>   <span class="mi">1</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">540.993</span><span class="p">]:</span> <span class="n">rms</span>    <span class="mi">8</span> <span class="nb">max</span>   <span class="mi">12</span> <span class="n">freq</span>   <span class="o">-</span><span class="mi">217</span> <span class="o">+/-</span>   <span class="mi">1</span> <span class="n">delay</span>    <span class="mi">73</span> <span class="o">+/-</span>   <span class="mi">0</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">541.993</span><span class="p">]:</span> <span class="n">rms</span>    <span class="mi">1</span> <span class="nb">max</span>    <span class="mi">2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">13</span> <span class="o">+/-</span>  <span class="mi">51</span> <span class="n">delay</span>    <span class="mi">73</span> <span class="o">+/-</span>   <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="frequency-synchronization">
<h3>Frequency Synchronization<a class="headerlink" href="#frequency-synchronization" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p><strong>Note: Before running frequency syncronization kill all instance of ts2phc running background.</strong></p></li>
</ul>
</div></blockquote>
<ul>
<li><p>Run ptp4l in master mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Board</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">ptp4l</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">interface</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">m</span>

<span class="ow">or</span> <span class="n">vice</span> <span class="n">versa</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>ptp4l master side log</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6195.490</span><span class="p">]:</span> <span class="n">selected</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp1</span> <span class="k">as</span> <span class="n">PTP</span> <span class="n">clock</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6195.491</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">INITIALIZING</span> <span class="n">to</span> <span class="n">LISTENING</span> <span class="n">on</span> <span class="n">INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6195.492</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">0</span><span class="p">:</span> <span class="n">INITIALIZING</span> <span class="n">to</span> <span class="n">LISTENING</span> <span class="n">on</span> <span class="n">INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6203.369</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">LISTENING</span> <span class="n">to</span> <span class="n">MASTER</span> <span class="n">on</span> <span class="n">ANNOUNCE_RECEIPT_TIMEOUT_EXPIRES</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6203.370</span><span class="p">]:</span> <span class="n">selected</span> <span class="n">local</span> <span class="n">clock</span> <span class="mi">9</span><span class="n">a11bc</span><span class="o">.</span><span class="n">fffe</span><span class="mf">.62</span><span class="n">d209</span> <span class="k">as</span> <span class="n">best</span> <span class="n">master</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6203.370</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">assuming</span> <span class="n">the</span> <span class="n">grand</span> <span class="n">master</span> <span class="n">role</span>
</pre></div>
</div>
<ul>
<li><p>Run ptp4l in slave mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Board</span> <span class="o">-</span><span class="mi">2</span> <span class="o">&gt;</span> <span class="n">ptp4l</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">interface_name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">m</span> <span class="o">-</span><span class="n">s</span>

 <span class="ow">or</span> <span class="n">vice</span> <span class="n">versa</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>ptp4l frequency synchronization slave side log</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6276.202</span><span class="p">]:</span> <span class="n">selected</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">ptp1</span> <span class="k">as</span> <span class="n">PTP</span> <span class="n">clock</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6276.203</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">INITIALIZING</span> <span class="n">to</span> <span class="n">LISTENING</span> <span class="n">on</span> <span class="n">INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6276.204</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">0</span><span class="p">:</span> <span class="n">INITIALIZING</span> <span class="n">to</span> <span class="n">LISTENING</span> <span class="n">on</span> <span class="n">INIT_COMPLETE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6277.829</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">new</span> <span class="n">foreign</span> <span class="n">master</span> <span class="mi">9</span><span class="n">a11bc</span><span class="o">.</span><span class="n">fffe</span><span class="mf">.62</span><span class="n">d209</span><span class="o">-</span><span class="mi">1</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6281.829</span><span class="p">]:</span> <span class="n">selected</span> <span class="n">best</span> <span class="n">master</span> <span class="n">clock</span> <span class="mi">9</span><span class="n">a11bc</span><span class="o">.</span><span class="n">fffe</span><span class="mf">.62</span><span class="n">d209</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6281.829</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">LISTENING</span> <span class="n">to</span> <span class="n">UNCALIBRATED</span> <span class="n">on</span> <span class="n">RS_SLAVE</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6284.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>    <span class="o">-</span><span class="mi">429840</span> <span class="n">s0</span> <span class="n">freq</span>      <span class="o">+</span><span class="mi">0</span> <span class="n">path</span> <span class="n">delay</span>       <span class="mi">101</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6285.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>    <span class="o">-</span><span class="mi">430012</span> <span class="n">s1</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">172</span> <span class="n">path</span> <span class="n">delay</span>       <span class="mi">119</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6286.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="mi">20</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">152</span> <span class="n">path</span> <span class="n">delay</span>       <span class="mi">119</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6286.829</span><span class="p">]:</span> <span class="n">port</span> <span class="mi">1</span><span class="p">:</span> <span class="n">UNCALIBRATED</span> <span class="n">to</span> <span class="n">SLAVE</span> <span class="n">on</span> <span class="n">MASTER_CLOCK_SELECTED</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6287.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="mi">36</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">130</span> <span class="n">path</span> <span class="n">delay</span>       <span class="mi">101</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6288.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="mi">37</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">118</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">77</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6289.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">3</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">147</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">82</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6290.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">4</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">149</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">77</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6291.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">8</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">154</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">77</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6292.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">5</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">154</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">76</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6293.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">4</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">154</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">75</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6294.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">3</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">154</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">74</span>
 <span class="n">ptp4l</span><span class="p">[</span><span class="mf">6295.829</span><span class="p">]:</span> <span class="n">master</span> <span class="n">offset</span>         <span class="o">-</span><span class="mi">1</span> <span class="n">s2</span> <span class="n">freq</span>    <span class="o">-</span><span class="mi">153</span> <span class="n">path</span> <span class="n">delay</span>        <span class="mi">73</span>
</pre></div>
</div>
<blockquote>
<div><ul class="simple">
<li><p><strong>Note: For more details refer <a class="reference external" href="https://linuxptp.sourceforge.net/">Linux PTP Project source files and Documentation</a></strong></p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="iperf-commands">
<h2>Iperf Commands<a class="headerlink" href="#iperf-commands" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p><strong>Note: Make sure to apply taskset to appropriate CPU core while running iperf traffic as shown in below commands.</strong></p></li>
</ul>
</div></blockquote>
<blockquote>
<div><ul class="simple">
<li><p>While running iperf traffic and ptp4l simultaneously, run either of the one in background.</p></li>
</ul>
</div></blockquote>
<p><strong>TCP TX</strong></p>
<ul>
<li><p>Sender:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">tx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span> 
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="n">s1</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">1850</span><span class="n">M</span> <span class="o">&amp;</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="n">s2</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">1850</span><span class="n">M</span> <span class="o">&amp;</span>
</pre></div>
</div>
</li>
<li><p>Receiver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">&amp;</span>  
<span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">&amp;</span>

<span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">rx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span>
<span class="n">echo</span> <span class="mi">32768</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">rps_sock_flow_entries</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">0</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>UDP TX</strong></p>
<ul>
<li><p>Sender:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">tx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span> 
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">0</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="n">s1</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">450</span><span class="n">M</span> <span class="o">&amp;</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">1</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="n">s2</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">450</span><span class="n">M</span> <span class="o">&amp;</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="n">s3</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5303</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">450</span><span class="n">M</span> <span class="o">&amp;</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">T</span> <span class="n">s4</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5304</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">450</span><span class="n">M</span> <span class="o">&amp;</span>
</pre></div>
</div>
</li>
<li><p>Receiver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">&amp;</span>  
<span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">&amp;</span>
<span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5303</span> <span class="o">&amp;</span>  
<span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5304</span> <span class="o">&amp;</span>

<span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">rx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span>
<span class="n">echo</span> <span class="mi">32768</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">rps_sock_flow_entries</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">0</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>TCP RX</strong></p>
<ul>
<li><p>Sender:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">tx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span> 
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">P</span> <span class="mi">2</span> <span class="o">-</span><span class="n">T</span> <span class="n">s1</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">500</span><span class="n">M</span> <span class="o">&amp;</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">P</span> <span class="mi">2</span> <span class="o">-</span><span class="n">T</span> <span class="n">s2</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">500</span><span class="n">M</span> <span class="o">&amp;</span>
</pre></div>
</div>
</li>
<li><p>Receiver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">&amp;</span>  
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">&amp;</span>

<span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">rx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span>
<span class="n">echo</span> <span class="mi">32768</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">rps_sock_flow_entries</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">0</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>UDP RX</strong></p>
<ul>
<li><p>Sender:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">tx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span> 
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">P</span> <span class="mi">2</span> <span class="o">-</span><span class="n">T</span> <span class="n">s1</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">2500</span><span class="n">M</span> <span class="o">-</span><span class="n">l</span> <span class="mi">1448</span> <span class="o">&amp;</span>
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">Link</span> <span class="n">partner</span> <span class="n">IP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">P</span> <span class="mi">2</span> <span class="o">-</span><span class="n">T</span> <span class="n">s2</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span> <span class="o">-</span><span class="n">i</span> <span class="mi">60</span> <span class="o">-</span><span class="n">b</span> <span class="mi">2500</span><span class="n">M</span> <span class="o">-</span><span class="n">l</span> <span class="mi">1448</span> <span class="o">&amp;</span>
</pre></div>
</div>
</li>
<li><p>Receiver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">2</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5301</span> <span class="o">&amp;</span>  
<span class="n">taskset</span> <span class="o">-</span><span class="n">c</span> <span class="mi">3</span> <span class="n">iperf3</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5302</span> <span class="o">&amp;</span>

<span class="n">echo</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">irq</span><span class="o">/&lt;</span><span class="n">rx</span><span class="o">-</span><span class="n">irq</span><span class="o">-</span><span class="n">no</span><span class="o">&gt;/</span><span class="n">smp_affinity</span>
<span class="n">echo</span> <span class="mi">32768</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">rps_sock_flow_entries</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">0</span><span class="o">/</span><span class="n">rps_flow_cnt</span>
<span class="n">echo</span> <span class="mi">2048</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">class</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">eth1</span><span class="o">/</span><span class="n">queues</span><span class="o">/</span><span class="n">rx</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">rps_flow_cnt</span>   
</pre></div>
</div>
</li>
</ul>
<div class="section" id="next-steps">
<h3>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="build_vivado_design.html"><span class="doc">Building the TRD source Files</span></a></p></li>
<li><p>Go back to the <a class="reference internal" href="../platform_landing.html"><span class="doc">zcu670 Targeted Reference Designs start page</span></a></p></li>
</ul>
<p><strong>References</strong></p>
<ul class="simple">
<li><p>ZYNQ ULTRASCALE+ RFSOC Quick Start Guide (<a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1887797340/ZCU670+Quick+Start+Guide">ZCU670</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h2>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2023 Xilinx</p></div>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="trd_packaging.html" class="btn btn-neutral float-left" title="TRD Package Contents" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="build_vivado_design.html" class="btn btn-neutral float-right" title="Build Flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on May 03, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="https://pages.gitenterprise.xilinx.com/techdocs/Test/vvas/build/html/index.html#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>