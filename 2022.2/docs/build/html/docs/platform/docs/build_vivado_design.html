<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>Build Flow &mdash; ZCU670 Ethernet TRD 2022.2 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/documentation_options.js?v=13fe7e93"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Hardware Architecture of the Platform" href="hw_arch_platform.html" />
    <link rel="prev" title="Setting up the Board and Application Deployment" href="app_deployment.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../../../index.html" class="icon icon-home"> ZCU670 Ethernet TRD
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../platform_landing.html">ZCU670 Ethernet TRD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#quick-start">Quick Start</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../platform_landing.html#tutorials">Tutorials</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Build Flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-build-the-trd-package-with-the-top-makefile">To Build the TRD Package with the top Makefile:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-build-the-hardware-platform-xsa">To Build the Hardware Platform XSA:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-build-the-petalinux-images">To Build the Petalinux Images:</a></li>
<li class="toctree-l4"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#architecture-documents">Architecture Documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#others">Others</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#xilinx-support">Xilinx Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform_landing.html#license">License</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Versions</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/ZCU670_Ethernet_TRD/2022.2/docs/build/html/index.html">Master (2022.2)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ZCU670 Ethernet TRD</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../platform_landing.html">ZCU670 Ethernet TRD</a> &raquo;</li>
      <li>Build Flow</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/platform/docs/build_vivado_design.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <table class="sphinxhide">
 <tr>
   <td align="center"><img src="media/xilinx-logo.png" width="30%"/><h1> ZCU670 Evaluation Kit Tutorial</h1>
   </td>
 </tr>
 <tr>
 <td align="center"><h1>Using Vivado to Build the Hardware Design and petalinux images</h1> </td>
 </tr>
</table><section id="build-flow">
<h1>Build Flow<a class="headerlink" href="#build-flow" title="Link to this heading">¶</a></h1>
<p>This tutorial explains the steps to build the hardware design and software images from the TRD source package.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Vivado Design Suite 2022.2</p></li>
<li><p>PetaLinux 2022.2 tools</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><strong>Note: After sourcing the Vivado tool open <code class="docutils literal notranslate"><span class="pre">../.Xilinx/Vivado/Vivado_init.tcl</span></code> and add <code class="docutils literal notranslate"><span class="pre">enable_beta_device</span></code> command into it to enable all beta devices</strong></p></li>
</ul>
</div></blockquote>
</section>
<section id="to-build-the-trd-package-with-the-top-makefile">
<h2>To Build the TRD Package with the top Makefile:<a class="headerlink" href="#to-build-the-trd-package-with-the-top-makefile" title="Link to this heading">¶</a></h2>
<p>Follow the below steps to generate petalinux images using the top Makefile in <strong><code class="docutils literal notranslate"><span class="pre">../zcu670-ethernet-trd-2022.2/Makefile</span></code></strong> path.</p>
<ol>
<li><p>Go to the working directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">../</span><span class="n">zcu670</span><span class="o">-</span><span class="n">ethernet</span><span class="o">-</span><span class="n">trd</span><span class="o">-</span><span class="mf">2022.2</span>
</pre></div>
</div>
</li>
<li><p>Run the following command to build and generate sdcard image.</p>
<p>This Makefile calls lower level Makefiles to build hardware XSA and petalinux images. The image generation may take a hour time depends on the system specification.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">sdcard</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="to-build-the-hardware-platform-xsa">
<h2>To Build the Hardware Platform XSA:<a class="headerlink" href="#to-build-the-hardware-platform-xsa" title="Link to this heading">¶</a></h2>
<p>Follow the steps below to build XSA using the Makefile in <strong><code class="docutils literal notranslate"><span class="pre">../zcu670-ethernet-trd-2022.2/vivado/Makefile</span></code></strong> path.</p>
<ol>
<li><p>Go to the platform directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">../</span><span class="n">zcu670</span><span class="o">-</span><span class="n">ethernet</span><span class="o">-</span><span class="n">trd</span><span class="o">-</span><span class="mf">2022.2</span><span class="o">/</span><span class="n">vivado</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p>To build the XSA, Source Vivado tool and run the following command.</p>
<p>The Makefile uses scripts/main.tcl file to create a Vivado project, populate the block design and finally build a XSA. The XSA generation may take a hour time depends on the system specification.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">design_xsa</span>   
</pre></div>
</div>
</li>
<li><p>The generated XSA will be located at:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">../</span><span class="n">zcu670</span><span class="o">-</span><span class="n">ethernet</span><span class="o">-</span><span class="n">trd</span><span class="o">-</span><span class="mf">2022.2</span><span class="o">/</span><span class="n">vivado</span><span class="o">/</span><span class="n">zcu670_25G_PTP_subsys</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">xxv_ptp_subsys_wrapper</span><span class="o">.</span><span class="n">xsa</span>
</pre></div>
</div>
</section>
<section id="to-build-the-petalinux-images">
<h2>To Build the Petalinux Images:<a class="headerlink" href="#to-build-the-petalinux-images" title="Link to this heading">¶</a></h2>
<p>Follow the steps below to build petalinux images using the Makefile in <strong>../zcu670-ethernet-trd-2022.2/petalinux/xilinx-zcu670-trd</strong> path.</p>
<ol>
<li><p>Go to the petalinux BSP folder.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">../</span><span class="n">zcu670</span><span class="o">-</span><span class="n">ethernet</span><span class="o">-</span><span class="n">trd</span><span class="o">-</span><span class="mf">2022.2</span><span class="o">/</span><span class="n">petalinux</span><span class="o">/</span><span class="n">xilinx</span><span class="o">-</span><span class="n">zcu670</span><span class="o">-</span><span class="n">trd</span>
</pre></div>
</div>
</li>
<li><p>To build boot images, source petalinux tool and run the following command.</p>
<p>The Makefile configures the hardware platform required to build the petalinux images and create BOOT.BIN, which comprise of  FSBL, UBoot, PMU firmware and hardware bit file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">boot</span>
</pre></div>
</div>
</li>
<li><p>The generated images will be located at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">../</span><span class="n">zcu670</span><span class="o">-</span><span class="n">ethernet</span><span class="o">-</span><span class="n">trd</span><span class="o">-</span><span class="mf">2022.2</span><span class="o">/</span><span class="n">petalinux</span><span class="o">/</span><span class="n">xilinx</span><span class="o">-</span><span class="n">zcu670</span><span class="o">-</span><span class="n">trd</span><span class="o">/</span><span class="n">images</span><span class="o">/</span><span class="n">linux</span>
</pre></div>
</div>
<p><strong>Note</strong>: The XSA used to configure petalinux is available in <strong>../zcu670-ethernet-trd-2022.2/petalinux/xilinx-zcu670-trd/project-spec/hw-description</strong> path.</p>
</li>
<li><p>Copy the image (image.ub , BOOT.BIN and boot.scr ) to the FAT32 formatted SD card and insert the card in SD card slot to run the design. This image is functionally
equivalent to the prebuilt sdcard image provided with package.</p></li>
</ol>
<section id="next-steps">
<h3>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="hw_arch_platform.html"><span class="doc">Hardware and Software Architecture</span></a></p></li>
<li><p>Go back to the <a class="reference internal" href="../platform_landing.html"><span class="doc">zcu670 Targeted Reference Designs start page</span></a></p></li>
</ul>
</section>
<section id="references">
<h3>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Vivado user guide <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug901-vivado-synthesis/Running-Synthesis">UG901</a></p></li>
<li><p>Petalinux user guide <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1144-petalinux-tools-reference-guide.pdf">UG1144</a></p></li>
</ul>
</section>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading">¶</a></h2>
<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.</p>
<p>You may obtain a copy of the License at
<a class="reference external" href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p align="center">Copyright&copy; 2023 Xilinx</p></section>
</section>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="app_deployment.html" class="btn btn-neutral float-left" title="Setting up the Board and Application Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hw_arch_platform.html" class="btn btn-neutral float-right" title="Hardware Architecture of the Platform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on August 31, 2023.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="https://pages.gitenterprise.xilinx.com/techdocs/Test/vvas/build/html/index.html#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>